# ç”µå•†ç”¨æˆ·è¡Œä¸ºå…¨é“¾è·¯åˆ†æå¹³å°

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

åŸºäº Hadoop ç”Ÿæ€çš„ç”µå•†ç”¨æˆ·è¡Œä¸ºåˆ†æå¹³å°ï¼Œå®ç°ç”¨æˆ·è¡Œä¸ºæ•°æ®çš„é‡‡é›†ã€æ¸…æ´—ã€å­˜å‚¨å’Œåˆ†æã€‚

## ğŸ–¥ï¸ æœåŠ¡å™¨ä¿¡æ¯

| èŠ‚ç‚¹ | ä¸»æœºå | å†…ç½‘IP | å…¬ç½‘IP | ç³»ç»Ÿ |
|------|--------|--------|--------|------|
| **ä¸»èŠ‚ç‚¹** | MainNode | 172.16.93.243 | 120.26.127.101 (å¼¹æ€§) | Ubuntu 22.04 |
| **ä»èŠ‚ç‚¹1** | Node1 | 172.21.108.43 | - | Ubuntu 22.04 |
| **ä»èŠ‚ç‚¹2** | Node2 | 172.16.93.242 | - | Ubuntu 22.04 |

> âš ï¸ æ³¨æ„ï¼šMainNodeå…¬ç½‘IPä¸ºå¼¹æ€§ä»˜è´¹ï¼Œæ¯æ¬¡å¯åŠ¨å¯èƒ½å˜åŒ–

## ğŸ—ï¸ é›†ç¾¤æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        é˜¿é‡Œäº‘ VPC ç½‘ç»œ                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    MainNode     â”‚     Node1       â”‚          Node2              â”‚
â”‚  172.16.93.243  â”‚  172.21.108.43  â”‚      172.16.93.242          â”‚
â”‚                 â”‚                 â”‚                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   hadoop1   â”‚ â”‚ â”‚   hadoop2   â”‚ â”‚ â”‚   hadoop3   â”‚  hadoop4  â”‚ â”‚
â”‚ â”‚   (master)  â”‚ â”‚ â”‚   (slave1)  â”‚ â”‚ â”‚   (slave2)  â”‚  (å¯é€‰)   â”‚ â”‚
â”‚ â”‚             â”‚ â”‚ â”‚             â”‚ â”‚ â”‚             â”‚           â”‚ â”‚
â”‚ â”‚ NameNode    â”‚ â”‚ â”‚ DataNode    â”‚ â”‚ â”‚ DataNode    â”‚ DataNode  â”‚ â”‚
â”‚ â”‚ ResourceMgr â”‚ â”‚ â”‚ NodeManager â”‚ â”‚ â”‚ NodeManager â”‚ NodeMgr   â”‚ â”‚
â”‚ â”‚ ZooKeeper   â”‚ â”‚ â”‚ ZooKeeper   â”‚ â”‚ â”‚ ZooKeeper   â”‚           â”‚ â”‚
â”‚ â”‚ HMaster     â”‚ â”‚ â”‚ RegionServerâ”‚ â”‚ â”‚ RegionServerâ”‚ RegionSvr â”‚ â”‚
â”‚ â”‚ HiveServer  â”‚ â”‚ â”‚             â”‚ â”‚ â”‚             â”‚           â”‚ â”‚
â”‚ â”‚ MySQL       â”‚ â”‚ â”‚             â”‚ â”‚ â”‚             â”‚           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| ç»„ä»¶ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| JDK | Adoptium OpenJDK 8u392 | Javaè¿è¡Œç¯å¢ƒ |
| Hadoop | 3.3.6 | åˆ†å¸ƒå¼å­˜å‚¨ä¸è®¡ç®— |
| ZooKeeper | 3.8.4 | åˆ†å¸ƒå¼åè°ƒæœåŠ¡ |
| HBase | 2.5.7 | åˆ—å¼æ•°æ®åº“ |
| Hive | 3.1.3 | æ•°æ®ä»“åº“ |
| MySQL | 5.7 | Hiveå…ƒæ•°æ®å­˜å‚¨ |
| Docker | latest | å®¹å™¨åŒ–éƒ¨ç½² |

## ğŸ“ ç›®å½•ç»“æ„

```
HadoopHomework/
â”œâ”€â”€ docker/                    # Docker é…ç½®
â”‚   â”œâ”€â”€ base/                  # åŸºç¡€é•œåƒ Dockerfile
â”‚   â””â”€â”€ compose/               # å„èŠ‚ç‚¹ Docker Compose æ–‡ä»¶
â”œâ”€â”€ config/                    # Hadoopç”Ÿæ€é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ hadoop/                # core-site, hdfs-site, yarn-site
â”‚   â”œâ”€â”€ zookeeper/             # zoo.cfg
â”‚   â”œâ”€â”€ hbase/                 # hbase-site.xml
â”‚   â””â”€â”€ hive/                  # hive-site.xml
â”œâ”€â”€ scripts/                   # éƒ¨ç½²å’Œè¿ç»´è„šæœ¬
â”‚   â”œâ”€â”€ init/                  # ECSåˆå§‹åŒ–è„šæœ¬ (Ubuntu 22.04)
â”‚   â””â”€â”€ deploy/                # é›†ç¾¤éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ mapreduce/                 # MapReduce ç¨‹åº
â”œâ”€â”€ data/                      # æµ‹è¯•æ•°æ®
â”œâ”€â”€ hql/                       # Hive SQL è„šæœ¬
â”œâ”€â”€ docs/                      # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ visualization/             # å¯è§†åŒ–
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åˆå§‹åŒ–ECSï¼ˆæ¯å°æœºå™¨æ‰§è¡Œï¼‰
```bash
# ä¸Šä¼ é¡¹ç›®åˆ°æœåŠ¡å™¨åæ‰§è¡Œ
chmod +x scripts/init/init-ecs.sh
sudo ./scripts/init/init-ecs.sh
```

### 2. æ„å»ºDockeré•œåƒï¼ˆMainNodeæ‰§è¡Œï¼‰
```bash
./scripts/deploy/build-image.sh
```

### 3. åˆ†å‘é•œåƒåˆ°å…¶ä»–èŠ‚ç‚¹
```bash
./scripts/deploy/distribute-image.sh
```

### 4. å¯åŠ¨é›†ç¾¤
```bash
# MainNode
./scripts/deploy/start-cluster.sh

# Node1
cd docker/compose && docker compose -f docker-compose-slave1.yml up -d

# Node2
cd docker/compose && docker compose -f docker-compose-slave2.yml up -d
```

## ğŸ‘¥ Dockerå®¹å™¨è§’è‰²åˆ†é…

| å®¹å™¨å | è¿è¡ŒèŠ‚ç‚¹ | å®¹å™¨IP | è§’è‰² |
|--------|----------|--------|------|
| hadoop1 | MainNode | 172.18.0.2 | NameNode, ResourceManager, ZK, HMaster, Hive |
| hadoop2 | Node1 | 172.18.0.3 | DataNode, NodeManager, ZK, RegionServer |
| hadoop3 | Node2 | 172.18.0.4 | DataNode, NodeManager, ZK, RegionServer |
| hadoop4 | Node2 | 172.18.0.5 | DataNode, NodeManager, RegionServer (å¯é€‰) |

## ğŸ“Š Web UI è®¿é—®

| æœåŠ¡ | ç«¯å£ | åœ°å€ |
|------|------|------|
| HDFS NameNode | 9870 | http://120.26.127.101:9870 |
| YARN ResourceManager | 8088 | http://120.26.127.101:8088 |
| HBase Master | 16010 | http://120.26.127.101:16010 |
| Hive WebUI | 10002 | http://120.26.127.101:10002 |

## ğŸ”§ SSHè¿æ¥

```bash
# è¿æ¥ä¸»èŠ‚ç‚¹
ssh root@120.26.127.101

# ä»ä¸»èŠ‚ç‚¹è·³è½¬åˆ°å…¶ä»–èŠ‚ç‚¹ï¼ˆå†…ç½‘ï¼‰
ssh root@172.21.108.43   # Node1
ssh root@172.16.93.242   # Node2
```

## ğŸ“ License

MIT License
